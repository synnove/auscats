{% extends "layout.html" %}

{% block content %}
<div class="container">
    <div class="row">
         <div class="large-6 large-offset-3 columns">
            {% with errors = get_flashed_messages(category_filter=["invalid"]) %}
                {% if errors %}
                    <div data-alert class="alert-box warning radius text-center">
                        {% for message in errors %}
                            <b>{{ message }}</b><br>
                        {% endfor %}
                        <a href="#" class="close">&times;</a>
                    </div>
                {% endif %}
            {% endwith %}
        </div>
    </div>

    <div class="row">
        <div class="row collapse">
            <div class="small-12 columns">
                <ul class="tabs" data-tab>
                    <li class="tab-title"><a href="#panel-1"><i class="fi-play"></i>Ongoing</a></li>
                    <li class="tab-title"><a href="#panel-2"><i class="fi-calendar"></i>Scheduled</a></li>
                    <li class="tab-title"><a href="#panel-3"><i class="fi-loop"></i>Completed</a></li>
                </ul>

                <div class="tabs-content">
                    <!-- ONGOING COURSES TAB SECTION-->
                    <div class="content active" id="panel-1">
                        <div class=panel>
                            <div class="row">
                                <div class="small-12 columns">
                                    <h3 class="subheader">You have 3 modules in progress</h3>
                                    <!-- FOR LOOP TO GENERATE CLASS INFO BLOCKS OF MODULES IN PROGRESS -->
                                    <h5 class="project">Module 1</h5>
                                    <div class="progress">
                                        <span class="meter blue" style="width:65%">
                                            <p class="percent">x%</p>
                                        </span>
                                    </div>
                                    <!-- END FOR LOOP -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END OF ONGOING COURSES TAB SECTION-->

                    <!-- SCHEDULED COURSES SECTION-->
                     <div class="content" id="panel-2">
                        <div class="row">
                            {% if num_incomplete >= 1 %}
                            <div id="incomplete" class="content active">
                                <div class="panel">
                                    <h3 class="subheader" >You have {{ num_incomplete }}  modules Scheduled</h3>
                                    <!-- FOR LOOP TO GENERATE CLASS INFO BLOCKS -->
                                    {% for module in active_modules %}
                                        <!-- NEED TO ADD CONDITION FOR MODULE NOT STARTED -->
                                        {% if module['MODULE_ID'] not in modules_completed %}
                                        <div class="row" >
                                            <div class="large-12 columns">
                                                <div class="row">
                                                    <div class="large-10 columns text-left">
                                                        <h3>{{ module['NAME'] }}</h3>
                                                    </div>

                                                    <div class="large-2 columns text-right">
                                                        <a href="/module/{{module['NAME']}}" class="button tiny round">Start</a>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="large-10 large-offset-1 columns text-justify">
                                                        <p>{{ module['BLURB'] }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        {% if module != active_modules[-1] %}
                                        <hr>
                                        {% endif %}
                                        
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                            {% else %}
                                <div id="incomplete" class="content text-center">
                                    <h3 class="subheader" >All modules completed!</h3>
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- COMPLETED COURSES SECTION-->
                    <div class="content" id="panel-3">
                        <div class="row">
                            <div class="panel">
                            {% if modules_completed %}
                            <h3 class="subheader">You have completed {{num_complete}} Modules</h3>
                                <div id="complete" class="content">
                                    <div class="row">
                                    <!-- FOR LOOP TO GENERATE CLASS INFO BLOCKS -->
                                    {% for module in active_modules %}
                                        {% if module['MODULE_ID'] in modules_completed %}
                                            <div class="large-12 columns">
                                                <div class="row">
                                                    <div class="medium-4 columns">
                                                        <div class="profile-card">
                                                            <img src="http://zurb.com/ink/images/inky-computer.svg" alt="Inky">
                                                            <div class="profile-info">
                                                                <h4 class="subheader">{{ module['NAME'] }}</h4>
                                                                <p>{{ module['BLURB'] }}</p>
                                                                <p><a href="/review/{{module['NAME']}}">Review</a> | <a href="/grades/{{module['NAME']}}">Grades</a></p>
                                                            </div>
                                                        </div>
                                                    </div>   
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    </div>
                                </div>
                            {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
