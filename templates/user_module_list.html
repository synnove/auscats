{% extends "layout.html" %}

{% block content %}
<div class="main__page">
    <div class="row">
	<div class="large-6 large-offset-3 columns">
	    {% with errors = get_flashed_messages(category_filter=["invalid"]) %}
		{% if errors %}
		    <div data-alert class="alert-box warning radius text-center">
			{% for message in errors %}
			    <b>{{ message }}</b><br>
			{% endfor %}
			<a href="#" class="close">&times;</a>
		    </div>
		{% endif %}
	    {% endwith %}
	</div>
    </div>
    <div class="row">
	<div class="large-12 columns">
	    <ul class="accordion" data-accordion>
		{% if num_incomplete >= 1 %}
		    <li class="accordion-navigation text-center">
		    <a href="#incomplete">Modules In Progress</a>
			<div id="incomplete" class="content active">
			    <!-- FOR LOOP TO GENERATE CLASS INFO BLOCKS -->
			    {% for module in active_modules %}
				{% if module['MODULE_ID'] not in modules_completed %}
				    <div class="row" >
					<div class="large-12 columns">
					    <div class="row">
						<div class="large-10 columns text-left">
						    <h3>{{ module['NAME'] }}</h3>
						</div>
					    
						<div class="large-2 columns text-right">
							<a href="/module/{{module['NAME']}}" class="button tiny round">Start</a>
						</div>
					    </div>
					    
					    <div class="row">
						<div class="large-10 large-offset-1 columns text-justify">
						    <p>{{ module['BLURB'] }}</p>
						</div>
					    </div>
					</div>
				    </div>
				    {% if module != active_modules[-1] %}
					<hr>
				    {% endif %}
				{% endif %}
			    {% endfor %}
			</div>
		    </li>
		{% else %}
		    <li class="accordion-navigation text-center">
		    <a href="#incomplete">Modules In Progress</a>
			<div id="incomplete" class="content text-center">
			    <h3>All modules completed!</h3>
			</div>
		    </li>
		{% endif %}
		{% if modules_completed %}
		    <li class="accordion-navigation text-center">
		    <a href="#complete">Completed Modules</a>
			<div id="complete" class="content">
			    <!-- FOR LOOP TO GENERATE CLASS INFO BLOCKS -->
			    {% for module in active_modules %}
				{% if module['MODULE_ID'] in modules_completed %}
				    <div class="row">
					<div class="large-12 columns">
					    <div class="panel">
						<div class="row">
						    <div class="large-7 columns text-left">
							<h3>{{ module['NAME'] }}</h3>
						    </div>
						<div class="large-5 columns text-right">
						    <a href="/review/{{module['NAME']}}" class="button tiny round green">Review</a>
						    <a href="/grades/{{module['NAME']}}" class="button tiny round green">View Grades</a>
						</div>

						<div class="row">
						    <div class="large-10 large-offset-1 columns text-justify">
							<p>{{ module['BLURB'] }}</p>
						    </div>
						</div>

						<!--
						<div class="progress large-10 large-offset-1 round">
						    <span class="meter" style="width: 40%">
						    </span>
						</div>
						-->
					    </div>
					</div>
				    </div>
				{% endif %}
			    {% endfor %}
			</div>
		    </li>
		{% endif %}
	    </ul>
	</div>
    </div>
</div>
{% endblock %}
